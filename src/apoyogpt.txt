Invoke-WebRequest http://localhost:3000/health | Select-Object -Expand Content

Test-NetConnection 180.176.105.244 -Port 3306

New-NetFirewallRule -DisplayName "Bloquear 3000 externo" -Direction Inbound -Protocol TCP -LocalPort 3000 -Action Block


Get-Content D:\backend-offline\logs\out.log -Tail 50
Get-Content D:\backend-offline\logs\err.log -Tail 50


SIN NSSM
$NODE="C:\node\node.exe"
$APPDIR="D:\backend-offline"
$SCRIPT="$APPDIR\src\app.js"
$SVC="backend-node"

sc create $SVC binPath= "`"$NODE`" `"$SCRIPT`"" start= auto
sc description $SVC "Backend Node offline (Express+MariaDB)"
sc start $SVC
sc failure $SVC reset= 86400 actions= restart/5000/restart/5000/restart/5000

1. Crear el servicio
sc create backendeut-node binPath= "\"C:\node\node.exe\" \"D:\dev\backend-offline\src\app.js\"" start= auto
sc description backendeut-node "Backend de EUT Node (Express + MariaDB)"

2. Hacer que inicie un poco después del arranque
reg add "HKLM\SYSTEM\CurrentControlSet\Services\backendeut-node" /v DelayedAutoStart /t REG_DWORD /d 1 /f

3. Configurar para que se reinicie si falla
sc failure backendeut-node reset= 86400 actions= restart/5000/restart/5000/restart/5000
sc failureflag backendeut-node 1

4. Iniciarlo Por Primera vez
sc start backendeut-node

Si quieres detenerlo:
sc stop backendeut-node


5. Verificar que está corriendo
sc query backendeut-node

Cómo quitarlo si lo necesitas
sc stop backendeut-node
sc delete backendeut-node



